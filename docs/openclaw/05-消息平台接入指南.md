# 05. æ¶ˆæ¯å¹³å°æ¥å…¥æŒ‡å—

> ğŸŸ¡ **éš¾åº¦ï¼šè¿›é˜¶** | â±ï¸ é˜…è¯»æ—¶é—´ï¼š20 åˆ†é’Ÿ | ğŸ“‹ å‰ç½®çŸ¥è¯†ï¼šå·²å®Œæˆå¿«é€Ÿå¼€å§‹ï¼ˆ[03-å¿«é€Ÿå¼€å§‹æŒ‡å—](03-å¿«é€Ÿå¼€å§‹æŒ‡å—.md)ï¼‰
>
> **æœ¬ç¯‡ä½ å°†å­¦ä¼šï¼š** æŠŠ AI åŠ©æ‰‹æ¥åˆ° WhatsAppã€Telegramã€Discord ç­‰æ¶ˆæ¯å¹³å°ï¼Œåœ¨æ‰‹æœºä¸Šéšæ—¶è·Ÿ AI èŠå¤©
>
> **å°ç™½é€Ÿé€šï¼š** åªçœ‹ä½ è¦ç”¨çš„é‚£ä¸ªå¹³å°çš„ç« èŠ‚å°±è¡Œï¼Œä¸éœ€è¦å…¨éƒ¨çœ‹å®Œã€‚æœ€ç®€å•çš„æ˜¯ Telegramï¼ˆåªéœ€è¦ä¸€ä¸ª Bot Tokenï¼‰

## æ¦‚è¿°

OpenClaw çš„æ ¸å¿ƒå–ç‚¹ä¹‹ä¸€ï¼šä¸€ä¸ª Gateway è¿æ¥æ‰€æœ‰æ¶ˆæ¯å¹³å°ã€‚ä½ åœ¨ WhatsApp ä¸Šç»™ AI å‘æ¶ˆæ¯ï¼Œå®ƒèƒ½å¸®ä½ åœ¨ Telegram ä¸Šå›å¤åˆ«äººã€‚ä¸ç®¡ä½ çš„ç”¨æˆ·åˆ†æ•£åœ¨å“ªäº›å¹³å°ï¼ŒOpenClaw éƒ½èƒ½æŠŠå®ƒä»¬ç»Ÿä¸€åˆ°ä¸€ä¸ªå…¥å£ã€‚

è¿™ç¯‡æŒ‡å—ä¼šå¸¦ä½ ä»é›¶å¼€å§‹ï¼ŒæŠŠå„ä¸ªæ¶ˆæ¯å¹³å°æ¥å…¥ OpenClawã€‚ä»æ¦‚å¿µç†è§£åˆ°å®é™…é…ç½®ï¼Œä»ä¸»æµå¹³å°åˆ°å°ä¼—æ¸ é“ï¼Œä»åŸºç¡€æ¥å…¥åˆ°é«˜çº§ç©æ³•ï¼Œå…¨éƒ¨è¦†ç›–ã€‚

---

## 1. Channelï¼ˆæ¶ˆæ¯å¹³å°ï¼‰æ¦‚å¿µè¯¦è§£

### 1.1 ä»€ä¹ˆæ˜¯ Channel

åœ¨ OpenClaw é‡Œï¼ŒChannel å°±æ˜¯"æ¶ˆæ¯å¹³å°"çš„æŠ½è±¡ã€‚æ¯ä¸ª Channel ä»£è¡¨ä¸€ä¸ªæ¶ˆæ¯æ¥æºå’Œç›®çš„åœ°ï¼š

- ä¸€ä¸ª WhatsApp è´¦å· = ä¸€ä¸ª Channel
- ä¸€ä¸ª Telegram Bot = ä¸€ä¸ª Channel
- ä¸€ä¸ª Discord Bot = ä¸€ä¸ª Channel
- ä¸€ä¸ª Slack App = ä¸€ä¸ª Channel
- ä¸€ä¸ªé£ä¹¦åº”ç”¨ = ä¸€ä¸ª Channelï¼ˆé€šè¿‡ extensionï¼‰
- ä¸€ä¸ª Signal è´¦å· = ä¸€ä¸ª Channel
- ä¸€ä¸ª Web Chat ç»„ä»¶ = ä¸€ä¸ª Channel

Channel æ˜¯ OpenClaw æ¶ˆæ¯ç³»ç»Ÿçš„åŸºæœ¬å•å…ƒã€‚æ‰€æœ‰æ¶ˆæ¯éƒ½é€šè¿‡ Channel è¿›å‡ºã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ä¸ª"åŒå‘ç®¡é“"â€”â€”å¤–éƒ¨å¹³å°çš„æ¶ˆæ¯ä»è¿™é‡Œæµå…¥ OpenClawï¼ŒOpenClaw çš„å›å¤ä¹Ÿä»è¿™é‡Œæµå‡ºåˆ°å¯¹åº”å¹³å°ã€‚

### 1.2 Channel çš„ç”Ÿå‘½å‘¨æœŸ

```
æ·»åŠ  Channelï¼ˆé…ç½®å‡­è¯ï¼‰â†’ ç™»å½•/é“¾æ¥è´¦å· â†’ æ¥æ”¶/å‘é€æ¶ˆæ¯ â†’ ï¼ˆå¯é€‰ï¼‰ç§»é™¤
```

Channel çš„ç®¡ç†ä¸»è¦é€šè¿‡é…ç½®æ–‡ä»¶ `~/.openclaw/openclaw.json`ï¼ˆJSON5 æ ¼å¼ï¼‰å’Œ CLI å‘½ä»¤å®Œæˆã€‚å¯ä»¥ç”¨ `openclaw channels status` æŸ¥çœ‹å„é¢‘é“çš„å½“å‰çŠ¶æ€ã€‚

### 1.3 Channel ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰ Channel
openclaw channels list

# æŸ¥çœ‹é¢‘é“çŠ¶æ€
openclaw channels status

# æŸ¥çœ‹å¹³å°èƒ½åŠ›
openclaw channels capabilities

# æ·»åŠ é¢‘é“
openclaw channels add <channel>

# é“¾æ¥é¢‘é“è´¦å·ï¼ˆå¦‚ WhatsApp æ‰«ç ï¼‰
openclaw channels login <channel>

# ç™»å‡ºé¢‘é“
openclaw channels logout <channel>

# è§£æé¢‘é“/ç”¨æˆ·å
openclaw channels resolve <channel> <identifier>

# æŸ¥çœ‹é¢‘é“æ—¥å¿—
openclaw channels logs <channel>

# ç§»é™¤é¢‘é“
openclaw channels remove <channel>
```

### 1.4 æ”¯æŒçš„å¹³å°ä¸€è§ˆ

| å¹³å° | ç±»å‹ | åŒå‘æ¶ˆæ¯ | ç¾¤ç»„æ”¯æŒ | æ¥å…¥éš¾åº¦ |
|------|------|---------|---------|---------|
| Telegram | grammY | âœ… | âœ… | â­ ç®€å• |
| WhatsApp | Baileysï¼ˆéå®˜æ–¹ï¼‰ | âœ… | âœ… | â­ ç®€å•ï¼ˆæ‰«ç ï¼‰ |
| Discord | discord.js | âœ… | âœ… | â­â­ ä¸­ç­‰ |
| Slack | @slack/bolt | âœ… | âœ… | â­â­ ä¸­ç­‰ |
| Signal | signal-cli | âœ… | âœ… | â­â­ ä¸­ç­‰ |
| é£ä¹¦ | Extensionï¼ˆ@larksuiteoapi/node-sdkï¼‰ | âœ… | âœ… | â­â­ ä¸­ç­‰ |
| Microsoft Teams | å†…ç½® | âœ… | âœ… | â­â­ ä¸­ç­‰ |
| Google Chat | å†…ç½® | âœ… | âœ… | â­â­ ä¸­ç­‰ |
| LINE | @line/bot-sdk | âœ… | âœ… | â­â­ ä¸­ç­‰ |
| Matrix | å†…ç½® | âœ… | âœ… | â­â­ ä¸­ç­‰ |
| BlueBubbles | iMessageï¼ˆæ¨èï¼‰ | âœ… | âœ… | â­â­ ä¸­ç­‰ |
| iMessage | Legacyï¼ˆmacOS onlyï¼‰ | âœ… | âŒ | â­â­â­ è¾ƒéš¾ |
| Zalo / Zalo Personal | å†…ç½® | âœ… | âœ… | â­â­ ä¸­ç­‰ |
| Web Chat | Gateway WebSocket | âœ… | âŒ | â­ ç®€å• |

---

## 2. Telegram æ¥å…¥

> ğŸ“‹ **å¼€å§‹ä¹‹å‰ä½ éœ€è¦ï¼š** ä¸€ä¸ª Telegram è´¦å·ã€é€šè¿‡ @BotFather åˆ›å»ºçš„ Bot Token

Telegram æ˜¯æœ€å®¹æ˜“æ¥å…¥çš„å¹³å°ï¼Œ5 åˆ†é’Ÿå°±èƒ½æå®šã€‚

### 2.1 åˆ›å»º Telegram Bot

1. åœ¨ Telegram ä¸­æœç´¢ `@BotFather`
2. å‘é€ `/newbot`
3. æŒ‰æç¤ºè¾“å…¥ Bot åç§°å’Œç”¨æˆ·å
4. è·å¾— Bot Tokenï¼ˆæœºå™¨äººçš„èº«ä»½å‡­è¯ï¼Œç±»ä¼¼äºç™»å½•å¯†ç ï¼‰ï¼ˆæ ¼å¼ï¼š`123456789:ABCdefGHIjklMNOpqrsTUVwxyz`ï¼‰

```
BotFather: Done! Congratulations on your new bot.
Use this token to access the HTTP API:
123456789:ABCdefGHIjklMNOpqrsTUVwxyz
```

### 2.2 é…ç½® OpenClaw

åœ¨ `~/.openclaw/openclaw.json`ï¼ˆJSON5 æ ¼å¼ï¼‰ä¸­æ·»åŠ  Telegram é…ç½®ï¼š

```json5
{
  channels: {
    telegram: {
      botToken: "123456789:ABCdefGHIjklMNOpqrsTUVwxyz",
      // æˆ–è€…ä½¿ç”¨ç¯å¢ƒå˜é‡ TELEGRAM_BOT_TOKENï¼Œæ­¤å¤„å¯çœç•¥ botToken

      // ç¾¤ç»„é…ç½®ï¼ˆå¯é€‰ï¼‰
      groups: {
        // requireMention: true,  // ç¾¤ç»„ä¸­éœ€è¦ @bot æ‰å›å¤
      },

      // Webhook æ¨¡å¼ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨ pollingï¼‰
      // webhookUrl: "https://your-domain.com/webhook/telegram",
      // webhookSecret: "your-webhook-secret",
    },
  },
}
```

ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½® Bot Tokenï¼š

```bash
export TELEGRAM_BOT_TOKEN="123456789:ABCdefGHIjklMNOpqrsTUVwxyz"
```

### 2.3 Webhook vs Polling

Webhookï¼ˆæ¶ˆæ¯æ¨é€æœºåˆ¶ï¼Œå¹³å°ä¸»åŠ¨æŠŠæ–°æ¶ˆæ¯å‘ç»™ä½ çš„æœåŠ¡å™¨ï¼‰å’Œ Pollingï¼ˆä½ çš„æœåŠ¡å™¨ä¸»åŠ¨å»å¹³å°æ‹‰å–æ–°æ¶ˆæ¯ï¼‰æ˜¯ä¸¤ç§æ¥æ”¶æ¶ˆæ¯çš„æ–¹å¼ï¼š

| ç‰¹æ€§ | Webhook | Polling |
|------|---------|---------|
| å®æ—¶æ€§ | å³æ—¶æ¨é€ | æœ‰å»¶è¿Ÿï¼ˆå–å†³äºè½®è¯¢é—´éš”ï¼‰ |
| èµ„æºæ¶ˆè€— | ä½ï¼ˆè¢«åŠ¨æ¥æ”¶ï¼‰ | é«˜ï¼ˆæŒç»­è¯·æ±‚ï¼‰ |
| ç½‘ç»œè¦æ±‚ | éœ€è¦å…¬ç½‘ HTTPS åœ°å€ | ä¸éœ€è¦å…¬ç½‘åœ°å€ |
| é€‚ç”¨åœºæ™¯ | ç”Ÿäº§ç¯å¢ƒ | å¼€å‘/æµ‹è¯•ç¯å¢ƒ |

### 2.4 é«˜çº§é…ç½®

```json5
{
  channels: {
    telegram: {
      botToken: "123456789:ABCdefGHIjklMNOpqrsTUVwxyz",

      // ç¾¤ç»„é…ç½®
      groups: {
        requireMention: true,  // ç¾¤ç»„ä¸­éœ€è¦ @bot æ‰å›å¤
      },

      // Webhook é…ç½®ï¼ˆå¯é€‰ï¼‰
      webhookUrl: "https://your-domain.com/webhook/telegram",
      webhookSecret: "your-webhook-secret",
    },
  },
}
```

### 2.5 å¸¸è§é—®é¢˜

**Bot æ”¶ä¸åˆ°æ¶ˆæ¯ï¼Ÿ**
- æ£€æŸ¥ Token æ˜¯å¦æ­£ç¡®
- Webhook æ¨¡å¼ï¼šç¡®è®¤ HTTPS è¯ä¹¦æœ‰æ•ˆï¼ŒURL å¯è®¿é—®
- Polling æ¨¡å¼ï¼šç¡®è®¤æ²¡æœ‰å…¶ä»–ç¨‹åºåœ¨ä½¿ç”¨åŒä¸€ä¸ª Token
- ç¾¤ç»„ä¸­ï¼šç¡®è®¤ Bot å·²è¢«æ·»åŠ åˆ°ç¾¤ç»„ï¼Œä¸” Privacy Mode å·²å…³é—­ï¼ˆ`/setprivacy` â†’ Disableï¼‰

---

## 3. WhatsApp æ¥å…¥

> ğŸ“‹ **å¼€å§‹ä¹‹å‰ä½ éœ€è¦ï¼š** ä¸€éƒ¨å®‰è£…äº† WhatsApp çš„æ‰‹æœºã€æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€ç½‘ç»œç¯å¢ƒä¸‹

OpenClaw ä½¿ç”¨ Baileysï¼ˆéå®˜æ–¹çš„ WhatsApp è¿æ¥åº“ï¼Œé€šè¿‡æ‰«ç ç™»å½•ï¼‰ï¼ˆåŒ…åï¼š`@whiskeysockets/baileys`ï¼‰æ¥å…¥ WhatsAppï¼Œé€šè¿‡æ‰«ç é“¾æ¥è®¾å¤‡ï¼Œæ— éœ€ Meta Cloud APIã€‚

### 3.1 é“¾æ¥ WhatsApp è®¾å¤‡

æ¥å…¥éå¸¸ç®€å•ï¼Œåªéœ€ä¸€æ­¥æ‰«ç ï¼š

```bash
openclaw channels login whatsapp
```

æ‰§è¡Œåç»ˆç«¯ä¼šæ˜¾ç¤ºä¸€ä¸ªäºŒç»´ç ï¼Œç”¨æ‰‹æœº WhatsApp æ‰«ç å³å¯å®Œæˆé“¾æ¥ï¼ˆç±»ä¼¼ WhatsApp Web çš„ç™»å½•æ–¹å¼ï¼‰ã€‚

å‡­è¯ä¼šè‡ªåŠ¨å­˜å‚¨åœ¨ `~/.openclaw/credentials` ç›®å½•ä¸­ã€‚

### 3.2 é…ç½® OpenClaw

åœ¨ `~/.openclaw/openclaw.json` ä¸­é…ç½® WhatsAppï¼š

```json5
{
  channels: {
    whatsapp: {
      // æ§åˆ¶è°å¯ä»¥å’Œ Bot å¯¹è¯
      // è®¾ç½®ä¸º ["*"] è¡¨ç¤ºå…è®¸æ‰€æœ‰äºº
      allowFrom: ["+8613800138000", "+8613900139000"],

      // ç¾¤ç»„ç™½åå•ï¼ˆè®¾ç½®ååªå“åº”ç™½åå•å†…çš„ç¾¤ç»„ï¼‰
      // groups: ["group-jid-1", "group-jid-2"],
    },
  },
}
```

### 3.3 DM å®‰å…¨ç­–ç•¥

WhatsApp æ”¯æŒ DM Pairing å®‰å…¨æœºåˆ¶ï¼ˆè¯¦è§ç¬¬ 10 èŠ‚ï¼‰ï¼Œå¯ä»¥é˜²æ­¢æœªçŸ¥ç”¨æˆ·ç›´æ¥ä¸ Bot å¯¹è¯ã€‚

### 3.4 å¸¸è§é—®é¢˜

**æ‰«ç åè¿æ¥ä¸ä¸Šï¼Ÿ**
- ç¡®ä¿æ‰‹æœº WhatsApp ç‰ˆæœ¬æ˜¯æœ€æ–°çš„
- ç¡®ä¿æ‰‹æœºå’Œè¿è¡Œ OpenClaw çš„è®¾å¤‡åœ¨åŒä¸€ç½‘ç»œç¯å¢ƒä¸‹
- å¦‚æœå‡­è¯è¿‡æœŸï¼Œåˆ é™¤ `~/.openclaw/credentials` ç›®å½•åé‡æ–°æ‰«ç 

**æ”¶ä¸åˆ°æŸäº›äººçš„æ¶ˆæ¯ï¼Ÿ**
- æ£€æŸ¥ `allowFrom` é…ç½®æ˜¯å¦åŒ…å«äº†å¯¹æ–¹çš„å·ç 
- å¦‚æœéœ€è¦æ¥æ”¶æ‰€æœ‰äººçš„æ¶ˆæ¯ï¼Œè®¾ç½® `allowFrom: ["*"]`

> **æ³¨æ„**ï¼šBaileys æ˜¯éå®˜æ–¹åº“ï¼ŒWhatsApp å¯èƒ½ä¼šå¯¹è‡ªåŠ¨åŒ–ä½¿ç”¨è¿›è¡Œé™åˆ¶ã€‚å»ºè®®ä»…ç”¨äºä¸ªäººæˆ–å°è§„æ¨¡åœºæ™¯ã€‚

---

## 4. Discord æ¥å…¥

> ğŸ“‹ **å¼€å§‹ä¹‹å‰ä½ éœ€è¦ï¼š** ä¸€ä¸ª Discord è´¦å·ã€ä¸€ä¸ªä½ æœ‰ç®¡ç†æƒé™çš„ Discord æœåŠ¡å™¨

### 4.1 åˆ›å»º Discord Application

1. è®¿é—® [Discord Developer Portal](https://discord.com/developers/applications)
2. ç‚¹å‡» "New Application"ï¼Œè¾“å…¥åç§°
3. è¿›å…¥ Bot é¡µé¢ï¼Œç‚¹å‡» "Add Bot"
4. å¤åˆ¶ Bot Token
5. å¼€å¯ "Message Content Intent"ï¼ˆé‡è¦ï¼ï¼‰

### 4.2 é‚€è¯· Bot åˆ°æœåŠ¡å™¨

ç”Ÿæˆé‚€è¯·é“¾æ¥ï¼š

```
https://discord.com/api/oauth2/authorize?client_id=YOUR_CLIENT_ID&permissions=274877975552&scope=bot%20applications.commands
```

æƒé™è¯´æ˜ï¼š
- `Send Messages`ï¼šå‘é€æ¶ˆæ¯
- `Read Message History`ï¼šè¯»å–å†å²æ¶ˆæ¯
- `Use Slash Commands`ï¼šä½¿ç”¨æ–œæ å‘½ä»¤
- `Attach Files`ï¼šå‘é€æ–‡ä»¶
- `Embed Links`ï¼šå‘é€åµŒå…¥æ¶ˆæ¯

### 4.3 é…ç½® OpenClaw

åœ¨ `~/.openclaw/openclaw.json` ä¸­é…ç½® Discordï¼š

```json5
{
  channels: {
    discord: {
      token: "YOUR_DISCORD_BOT_TOKEN",
      // æˆ–è€…ä½¿ç”¨ç¯å¢ƒå˜é‡ DISCORD_BOT_TOKENï¼Œæ­¤å¤„å¯çœç•¥ token

      // å‘½ä»¤é…ç½®
      commands: {
        native: true,       // å¯ç”¨åŸç”Ÿ Slash Commands
        text: true,         // å¯ç”¨æ–‡æœ¬å‘½ä»¤
        useAccessGroups: false,  // æ˜¯å¦ä½¿ç”¨è®¿é—®ç»„
      },

      // å…è®¸çš„ç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
      // allowFrom: ["user-id-1", "user-id-2"],

      // æœåŠ¡å™¨ç™½åå•ï¼ˆå¯é€‰ï¼‰
      // guilds: ["guild-id-1"],

      // åª’ä½“å¤§å°é™åˆ¶ï¼ˆMBï¼‰
      // mediaMaxMb: 25,
    },
  },
}
```

### 4.4 Slash Commands

OpenClaw ä¼šåœ¨è¿æ¥æ—¶è‡ªåŠ¨æ³¨å†Œ Slash Commandsï¼ˆéœ€è¦ `commands.native: true`ï¼‰ã€‚

### 4.5 å¸¸è§é—®é¢˜

**Bot åœ¨çº¿ä½†ä¸å›å¤ï¼Ÿ**
- ç¡®è®¤ "Message Content Intent" å·²å¼€å¯
- ç¡®è®¤ Bot æœ‰å¯¹åº”é¢‘é“çš„è¯»å†™æƒé™
- å¦‚æœè®¾ç½®äº† `mentionRequired: true`ï¼Œéœ€è¦ @bot

---

## 5. Slack æ¥å…¥

> ğŸ“‹ **å¼€å§‹ä¹‹å‰ä½ éœ€è¦ï¼š** ä¸€ä¸ª Slack å·¥ä½œåŒºçš„ç®¡ç†å‘˜æƒé™ã€èƒ½è®¿é—® [Slack API](https://api.slack.com/apps) çš„æµè§ˆå™¨

### 5.1 åˆ›å»º Slack App

1. è®¿é—® [Slack API](https://api.slack.com/apps)
2. ç‚¹å‡» "Create New App" â†’ "From scratch"
3. è¾“å…¥ App åç§°ï¼Œé€‰æ‹© Workspace

### 5.2 é…ç½®æƒé™

åœ¨ "OAuth & Permissions" ä¸­æ·»åŠ ä»¥ä¸‹ Bot Token Scopesï¼š

- `chat:write` - å‘é€æ¶ˆæ¯
- `channels:history` - è¯»å–å…¬å…±é¢‘é“æ¶ˆæ¯
- `groups:history` - è¯»å–ç§æœ‰é¢‘é“æ¶ˆæ¯
- `im:history` - è¯»å–ç§èŠæ¶ˆæ¯
- `app_mentions:read` - è¯»å– @æåŠ
- `files:read` - è¯»å–æ–‡ä»¶
- `files:write` - ä¸Šä¼ æ–‡ä»¶

### 5.3 é…ç½® Event Subscriptions

1. åœ¨ "Event Subscriptions" ä¸­å¼€å¯ Events
2. è®¾ç½® Request URLï¼š`https://your-domain.com/webhook/slack`
3. è®¢é˜…ä»¥ä¸‹ Bot Eventsï¼š
   - `message.channels` - å…¬å…±é¢‘é“æ¶ˆæ¯
   - `message.groups` - ç§æœ‰é¢‘é“æ¶ˆæ¯
   - `message.im` - ç§èŠæ¶ˆæ¯
   - `app_mention` - @æåŠ

### 5.4 é…ç½® OpenClaw

åœ¨ `~/.openclaw/openclaw.json` ä¸­é…ç½® Slackï¼š

```json5
{
  channels: {
    slack: {
      botToken: "xoxb-xxx",   // æˆ–ç¯å¢ƒå˜é‡ SLACK_BOT_TOKEN
      appToken: "xapp-xxx",   // æˆ–ç¯å¢ƒå˜é‡ SLACK_APP_TOKENï¼ˆSocket Mode å¿…éœ€ï¼‰
    },
  },
}
```

ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®ï¼š

```bash
export SLACK_BOT_TOKEN="xoxb-xxx"
export SLACK_APP_TOKEN="xapp-xxx"
```

### 5.5 Socket Mode vs Events API

| ç‰¹æ€§ | Socket Mode | Events API |
|------|------------|------------|
| ç½‘ç»œè¦æ±‚ | ä¸éœ€è¦å…¬ç½‘åœ°å€ | éœ€è¦å…¬ç½‘ HTTPS |
| å®æ—¶æ€§ | WebSocket å®æ—¶ | HTTP æ¨é€ |
| é€‚ç”¨åœºæ™¯ | å¼€å‘/å†…éƒ¨å·¥å…· | ç”Ÿäº§ç¯å¢ƒ |
| é…ç½®å¤æ‚åº¦ | ç®€å• | éœ€è¦é…ç½® Webhook |

### 5.6 å¸¸è§é—®é¢˜

**Bot ä¸å“åº”æ¶ˆæ¯ï¼Ÿ**
- ç¡®è®¤ Bot å·²è¢«é‚€è¯·åˆ°é¢‘é“ï¼ˆ`/invite @your-bot`ï¼‰
- ç¡®è®¤ Event Subscriptions å·²æ­£ç¡®é…ç½®
- æ£€æŸ¥ Signing Secret æ˜¯å¦æ­£ç¡®

---

## 6. é£ä¹¦æ¥å…¥ï¼ˆExtensionï¼‰

> ğŸ“‹ **å¼€å§‹ä¹‹å‰ä½ éœ€è¦ï¼š** é£ä¹¦ä¼ä¸šç®¡ç†å‘˜æƒé™ã€èƒ½è®¿é—® [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/) çš„æµè§ˆå™¨

> **æ³¨æ„**ï¼šé£ä¹¦æ˜¯é€šè¿‡ OpenClaw çš„ extension æœºåˆ¶æ”¯æŒçš„ï¼ˆ`extensions/feishu/`ï¼‰ï¼Œä½¿ç”¨ `@larksuiteoapi/node-sdk`ã€‚è¯¦ç»†é…ç½®è¯·å‚è€ƒ OpenClaw å®˜æ–¹æ–‡æ¡£ `docs/channels/feishu.md`ã€‚

### 6.1 åˆ›å»ºé£ä¹¦åº”ç”¨

1. è®¿é—® [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/)
2. åˆ›å»ºä¼ä¸šè‡ªå»ºåº”ç”¨
3. æ·»åŠ "æœºå™¨äºº"èƒ½åŠ›
4. è·å– App ID å’Œ App Secret

### 6.2 é…ç½®æƒé™

åœ¨åº”ç”¨æƒé™ä¸­å¼€å¯ï¼š
- `im:message` - è·å–ä¸å‘é€å•èŠã€ç¾¤ç»„æ¶ˆæ¯
- `im:message.group_at_msg` - æ¥æ”¶ç¾¤èŠä¸­ @æœºå™¨äººæ¶ˆæ¯
- `im:resource` - è·å–ä¸ä¸Šä¼ å›¾ç‰‡æˆ–æ–‡ä»¶èµ„æº

### 6.3 é…ç½®äº‹ä»¶è®¢é˜…

1. åœ¨"äº‹ä»¶è®¢é˜…"ä¸­è®¾ç½®è¯·æ±‚åœ°å€ï¼š`https://your-domain.com/webhook/feishu`
2. æ·»åŠ äº‹ä»¶ï¼š
   - `im.message.receive_v1` - æ¥æ”¶æ¶ˆæ¯

### 6.4 é…ç½® OpenClaw

é£ä¹¦ä½œä¸º extensionï¼Œé…ç½®æ–¹å¼è¯·å‚è€ƒ OpenClaw æºç ä¸­çš„ `docs/channels/feishu.md`ã€‚åŸºæœ¬éœ€è¦åœ¨é£ä¹¦å¼€æ”¾å¹³å°è·å– App ID å’Œ App Secretï¼Œç„¶ååœ¨ OpenClaw é…ç½®ä¸­è®¾ç½®ã€‚

---

## 7. Web Chat æ¥å…¥

> ğŸ“‹ **å¼€å§‹ä¹‹å‰ä½ éœ€è¦ï¼š** OpenClaw Gateway å·²å¯åŠ¨è¿è¡Œï¼ˆé»˜è®¤ç«¯å£ 18789ï¼‰

OpenClaw çš„ Web Chat é€šè¿‡ Gateway çš„ WebSocket è¿æ¥å®ç°ï¼Œä¸æ˜¯ç‹¬ç«‹çš„ HTTP è·¯å¾„ã€‚

### 7.1 å·¥ä½œåŸç†

Web Chat å®¢æˆ·ç«¯é€šè¿‡ WebSocket è¿æ¥åˆ° OpenClaw Gatewayï¼ˆé»˜è®¤ç«¯å£ `18789`ï¼‰ï¼Œå®ç°å®æ—¶åŒå‘é€šä¿¡ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ HTTP æœåŠ¡ï¼Œè€Œæ˜¯ Gateway çš„ä¸€éƒ¨åˆ†ã€‚

### 7.2 ä½¿ç”¨æ–¹å¼

Web Chat çš„å‰ç«¯å¯ä»¥æ˜¯ä»»ä½•æ”¯æŒ WebSocket çš„å®¢æˆ·ç«¯ã€‚è¿æ¥åˆ° Gateway çš„ WebSocket ç«¯ç‚¹å³å¯å¼€å§‹å¯¹è¯ã€‚

é»˜è®¤ Gateway åœ°å€ï¼š`ws://localhost:18789`

---

## 8. å…¶ä»–æ”¯æŒçš„å¹³å°

OpenClaw è¿˜æ”¯æŒä»¥ä¸‹å¹³å°ï¼Œå…·ä½“é…ç½®è¯·å‚è€ƒå„å¹³å°å¯¹åº”çš„å®˜æ–¹æ–‡æ¡£ï¼š

| å¹³å° | è¯´æ˜ |
|------|------|
| Signal | é€šè¿‡ signal-cli æ¥å…¥ |
| BlueBubbles | iMessage æ¥å…¥ï¼ˆæ¨èæ–¹å¼ï¼‰ |
| iMessage | Legacy æ–¹å¼ï¼Œä»… macOS |
| Microsoft Teams | å†…ç½®æ”¯æŒ |
| Google Chat | å†…ç½®æ”¯æŒ |
| Matrix | å†…ç½®æ”¯æŒ |
| Zalo / Zalo Personal | å†…ç½®æ”¯æŒ |
| LINE | é€šè¿‡ @line/bot-sdk æ¥å…¥ |

è¿™äº›å¹³å°çš„é…ç½®æ–¹å¼ä¸ Telegramã€Discord ç­‰ç±»ä¼¼ï¼Œåœ¨ `~/.openclaw/openclaw.json` çš„ `channels` ä¸­æ·»åŠ å¯¹åº”å¹³å°çš„é…ç½®å³å¯ã€‚

---

## 9. è‡ªå®šä¹‰ Channel å¼€å‘

> â­ï¸ **å°ç™½å¯è·³è¿‡** â€” è¿™éƒ¨åˆ†é¢å‘å¼€å‘è€…ï¼Œæ™®é€šç”¨æˆ·ä¸éœ€è¦çœ‹

> **æ¦‚å¿µæ€§è¯´æ˜**ï¼šä»¥ä¸‹ TypeScript æ¥å£æ˜¯å¯¹ Channel ç³»ç»Ÿçš„æ¦‚å¿µæ€§æè¿°ï¼Œå¸®åŠ©ç†è§£å…¶è®¾è®¡æ€è·¯ã€‚å®é™…æ¥å£å¯èƒ½ä¸æ­¤ä¸å®Œå…¨ä¸€è‡´ï¼Œè¯·ä»¥ OpenClaw æºç ä¸ºå‡†ã€‚

å¦‚æœ OpenClaw ä¸æ”¯æŒä½ éœ€è¦çš„å¹³å°ï¼Œå¯ä»¥å¼€å‘è‡ªå®šä¹‰ Channelã€‚

### 9.1 Channel æ¥å£ï¼ˆæ¦‚å¿µæ€§ï¼‰

```typescript
interface Channel {
  name: string;
  platform: string;

  connect(): Promise<void>;
  disconnect(): Promise<void>;

  onMessage(handler: (message: IncomingMessage) => void): void;
  sendMessage(to: string, message: OutgoingMessage): Promise<void>;
}
```

### 9.2 æ¶ˆæ¯æ ¼å¼ï¼ˆæ¦‚å¿µæ€§ï¼‰

```typescript
interface IncomingMessage {
  id: string;
  from: {
    id: string;
    name: string;
    platform: string;
  };
  content: {
    type: 'text' | 'image' | 'audio' | 'video' | 'file';
    text?: string;
    mediaUrl?: string;
    mimeType?: string;
  };
  timestamp: number;
  metadata: Record<string, any>;
}
```

---

## 10. DM å®‰å…¨ç­–ç•¥ï¼ˆPairingï¼‰

OpenClaw æä¾› DM Pairing æœºåˆ¶æ¥æ§åˆ¶è°å¯ä»¥ä¸ Bot ç§èŠã€‚

### 10.1 Pairing æ¨¡å¼

å½“ `dmPolicy` è®¾ç½®ä¸º `"pairing"` æ—¶ï¼ŒæœªçŸ¥å‘é€è€…ç»™ Bot å‘æ¶ˆæ¯ä¼šæ”¶åˆ°ä¸€ä¸ªé…å¯¹ç ã€‚ç®¡ç†å‘˜éœ€è¦æ‰‹åŠ¨æ‰¹å‡†ï¼š

```bash
openclaw pairing approve <channel> <code>
```

### 10.2 Open æ¨¡å¼

å½“ `dmPolicy` è®¾ç½®ä¸º `"open"` æ—¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥ç›´æ¥ä¸ Bot å¯¹è¯ã€‚æ­¤æ—¶éœ€è¦é…åˆ `allowFrom` åŒ…å« `"*"` æ¥å…è®¸æ‰€æœ‰ç”¨æˆ·ã€‚

### 10.3 ä½¿ç”¨å»ºè®®

- ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ `pairing` æ¨¡å¼ï¼Œé˜²æ­¢æœªæˆæƒç”¨æˆ·æ»¥ç”¨
- æµ‹è¯•ç¯å¢ƒå¯ä»¥ä½¿ç”¨ `open` æ¨¡å¼æ–¹ä¾¿è°ƒè¯•
- é…åˆå„å¹³å°çš„ `allowFrom` é…ç½®å¯ä»¥å®ç°æ›´ç»†ç²’åº¦çš„è®¿é—®æ§åˆ¶

---

## 11. æ¶ˆæ¯æ ¼å¼é€‚é…

ä¸åŒå¹³å°çš„æ¶ˆæ¯æ ¼å¼å·®å¼‚å¾ˆå¤§ï¼ŒOpenClaw ä¼šè‡ªåŠ¨å¤„ç†æ ¼å¼è½¬æ¢ã€‚

### 11.1 Markdown æ”¯æŒå¯¹æ¯”

| æ ¼å¼ | Telegram | WhatsApp | Discord | Slack | é£ä¹¦ |
|------|----------|----------|---------|-------|------|
| **ç²—ä½“** | âœ… `*text*` | âœ… `*text*` | âœ… `**text**` | âœ… `*text*` | âœ… |
| *æ–œä½“* | âœ… `_text_` | âœ… `_text_` | âœ… `*text*` | âœ… `_text_` | âœ… |
| `ä»£ç ` | âœ… `` `code` `` | âœ… `` `code` `` | âœ… `` `code` `` | âœ… `` `code` `` | âœ… |
| ä»£ç å— | âœ… | âŒ | âœ… | âœ… | âœ… |
| é“¾æ¥ | âœ… | âœ… è‡ªåŠ¨è¯†åˆ« | âœ… | âœ… | âœ… |

### 11.2 é•¿æ¶ˆæ¯å¤„ç†

ä¸åŒå¹³å°æœ‰ä¸åŒçš„æ¶ˆæ¯é•¿åº¦é™åˆ¶ï¼š

| å¹³å° | æœ€å¤§é•¿åº¦ | OpenClaw å¤„ç†æ–¹å¼ |
|------|---------|------------------|
| Telegram | 4096 å­—ç¬¦ | è‡ªåŠ¨åˆ†æ®µå‘é€ |
| WhatsApp | 4096 å­—ç¬¦ | è‡ªåŠ¨åˆ†æ®µå‘é€ |
| Discord | 2000 å­—ç¬¦ | è‡ªåŠ¨åˆ†æ®µå‘é€ |
| Slack | 40000 å­—ç¬¦ | é€šå¸¸ä¸éœ€è¦åˆ†æ®µ |
| é£ä¹¦ | 30000 å­—ç¬¦ | é€šå¸¸ä¸éœ€è¦åˆ†æ®µ |

### 11.3 åª’ä½“æ–‡ä»¶å¤„ç†

> **æ³¨æ„**ï¼šä»¥ä¸‹ä¸ºæ¦‚å¿µæ€§é…ç½®ç¤ºä¾‹ï¼Œå®é™…é…ç½®æ ¼å¼è¯·ä»¥ OpenClaw æ–‡æ¡£ä¸ºå‡†ã€‚

```json5
// å…¨å±€åª’ä½“é…ç½®ï¼ˆæ¦‚å¿µæ€§ç¤ºä¾‹ï¼‰
{
  media: {
    autoDownload: true,
    storagePath: "./media",
    maxFileSize: 20971520,  // 20MB
    supportedTypes: [
      "image/jpeg",
      "image/png",
      "image/gif",
      "audio/ogg",
      "audio/mpeg",
      "video/mp4",
      "application/pdf",
    ],
  },
}
```

---

## 12. å¸¸è§é—®é¢˜æ’æŸ¥

### 12.1 é€šç”¨é—®é¢˜

**Channel è¿æ¥æœ‰é—®é¢˜ï¼Ÿ**
```bash
# æŸ¥çœ‹é¢‘é“çŠ¶æ€
openclaw channels status

# æŸ¥çœ‹é¢‘é“æ—¥å¿—
openclaw channels logs <channel>
```

**æ¶ˆæ¯å»¶è¿Ÿå¾ˆé«˜ï¼Ÿ**
- Webhook æ¨¡å¼ï¼šæ£€æŸ¥æœåŠ¡å™¨ç½‘ç»œå»¶è¿Ÿ
- æ£€æŸ¥ AI æ¨¡å‹å“åº”æ—¶é—´

### 12.2 Webhook é€šç”¨é—®é¢˜

**Webhook éªŒè¯å¤±è´¥ï¼Ÿ**
- ç¡®è®¤ URL æ˜¯ HTTPSï¼ˆå¤§å¤šæ•°å¹³å°è¦æ±‚ï¼‰
- ç¡®è®¤ SSL è¯ä¹¦æœ‰æ•ˆï¼ˆä¸èƒ½æ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œé™¤éå¹³å°å…è®¸ï¼‰
- ç¡®è®¤ URL å¯ä»¥ä»å…¬ç½‘è®¿é—®

**æœ¬åœ°å¼€å‘æ€ä¹ˆæµ‹è¯• Webhookï¼Ÿ**

ä½¿ç”¨ ngrok æˆ– cloudflared åˆ›å»ºä¸´æ—¶éš§é“ï¼š

```bash
# ä½¿ç”¨ ngrok
ngrok http 18789
# è·å¾—ç±»ä¼¼ https://abc123.ngrok.io çš„åœ°å€

# ä½¿ç”¨ cloudflared
cloudflared tunnel --url http://localhost:18789
```

### 12.3 å¹³å°ç‰¹å®šé—®é¢˜

**Telegram Bot åœ¨ç¾¤ç»„ä¸­ä¸å›å¤ï¼Ÿ**
- å…³é—­ Privacy Modeï¼šåœ¨ BotFather ä¸­ `/setprivacy` -> Disable
- æˆ–è€…åœ¨é…ç½®ä¸­è®¾ç½® `groups.requireMention: true`ï¼Œç”¨æˆ·éœ€è¦ @bot

**WhatsApp è¿æ¥æ–­å¼€ï¼Ÿ**
- åˆ é™¤ `~/.openclaw/credentials` ç›®å½•åé‡æ–°æ‰§è¡Œ `openclaw channels login whatsapp` æ‰«ç 
- ç¡®ä¿æ‰‹æœº WhatsApp ä¿æŒåœ¨çº¿

**Discord Bot æ²¡æœ‰æƒé™ï¼Ÿ**
- é‡æ–°ç”Ÿæˆé‚€è¯·é“¾æ¥ï¼Œç¡®ä¿åŒ…å«æ‰€éœ€æƒé™
- åœ¨æœåŠ¡å™¨è®¾ç½®ä¸­æ£€æŸ¥ Bot è§’è‰²æƒé™

**Slack Bot æ”¶ä¸åˆ°æ¶ˆæ¯ï¼Ÿ**
- ç¡®è®¤ Bot å·²è¢«é‚€è¯·åˆ°é¢‘é“
- ç¡®è®¤ Event Subscriptions ä¸­çš„ Request URL éªŒè¯é€šè¿‡
- æ£€æŸ¥ Bot Token Scopes æ˜¯å¦å®Œæ•´

---

## ä¸‹ä¸€æ­¥

| ä¸‹ä¸€æ­¥ | æ–‡æ¡£ | è¯´æ˜ |
|--------|------|------|
| é…ç½®æŠ€èƒ½ | [06-æŠ€èƒ½ç³»ç»ŸæŒ‡å—](./06-æŠ€èƒ½ç³»ç»ŸæŒ‡å—.md) | è®© Agent å…·å¤‡æ›´å¤šèƒ½åŠ› |
| è®°å¿†ç³»ç»Ÿ | [07-è®°å¿†ç³»ç»ŸæŒ‡å—](./07-è®°å¿†ç³»ç»ŸæŒ‡å—.md) | è®© AI è®°ä½ç”¨æˆ·åå¥½ |
| å®‰å…¨é…ç½® | [10-å®‰å…¨é…ç½®æŒ‡å—](./10-å®‰å…¨é…ç½®æŒ‡å—.md) | Webhook å®‰å…¨ã€Token ç®¡ç† |
